(function(a,b){"use strict";"function"==typeof define&&define.amd?define([],function(){return a.ObservableState=b()}):"object"==typeof module&&module.exports?module.exports=b():a.ObservableState=b()})(this,function(){"use strict";function a(b){function c(n,o){var p=`ObservableState: ${new Date} ${n}`;this.push(p),o&&f(p)}function d(n){var o=[];return-1===n.indexOf(".")?this.hasOwnProperty(n):(o=n.split("."),d.apply(this[o[0]],[function(p){for(var q=[],r=1;r<=p.length-1;r++)q.push(p[r]);return q.join(".")}(o)]))}function e(n){console.warn(n)}function f(n){console.log(n)}function g(n){e(`ObservableState: key "${n}" is not found in state object`)}var h=this,j={},l=b,m=[];h.getHistory=function(){return m},h.set=function(n,o){var p=l,q=[];if(d.apply(l,[n])){if(-1!==n.indexOf(".")){q=n.split(".");for(var r=0;r<q.length-1;r++)p=p[q[r]];p[q[q.length-1]]=o}else l[n]=o;return c.apply(m,[`set value "${o}" in key "${n}"`,h.DEBUG_MODE]),"function"==typeof j[n]&&j[n].apply(h,[]),!0}return g.apply(h,[n]),!1},h.get=function(n){return d.apply(l,[n])?l[n]:(g(n),void 0)},h.subscribe=function(n,o){if(d.apply(l,[n])){if("function"==typeof o)return j[n]=o,c.apply(m,[`subscribed on "${n}"`,h.DEBUG_MODE]),!0;e(`ObservableState: cb parameter for subscribe method must be is function type`)}return g(n),!1},h.unsubscribe=function(n){return d(n)?("function"==typeof j[n]&&delete j[n],c.apply(m,[`unsubscribed on "${n}"`,h.DEBUG_MODE]),!0):(g(n),!1)},h.getSource=function(){return l}}return a.prototype.DEBUG_MODE=!1,a});